<?xml version="1.0" encoding="UTF-8"?>
<STEP-ProductInformation ContextID="Context1" WorkspaceID="Main" UseContextLocale="false">
    <BusinessRules>
        <BusinessRule ID="UpdateChangePackage" Scope="Global" Type="Action" RunPrivileged="false"><!-- Definition:
Action #1 (JavaScriptBusinessActionWithBinds):
<config>
  <bindings>
    <binding alias="node" type="Node" contract="CurrentObjectBindContract"/>
    <binding alias="logger" type="Logger" contract="LoggerBindContract"/>
    <binding alias="manager" type="Manager" contract="ManagerBindContract"/>
  </bindings>
  <messages/>
  <javaScript>
logger.info("AutoUpdateEP " + node)

if (node != null) {
	/** @type{ChangePackageHome} */
	var cpHome = manager.getHome(com.stibo.core.domain.changepackage.ChangePackageHome)
	var cp = cpHome.getChangePackageByID("ChangedItems")

	if (!isOpen(cp)) {
		log.info("AddToChangePackage Reopen")
		cp.reOpen()
	}

	logger.info("AddToChangePackage "+node.getClass().getName())
	cp.addItem(node)
}

/**
 * 
 * @param {ChangePackage} pCP 
 * @returns {boolean}
 */
function isOpen(pCP) {
	var state = pCP.getValue("ChangePackageState").getSimpleValue()
	logger.info("AddToChangePackage state = " + state)
	if ("Change Package (Sealed)".equals(state)) {
		logger.info("isOpen(" + pCP.getName() + " false")
		return false
	}
	logger.info("isOpen(" + pCP.getName() + " true")
	return true;
}
  </javaScript>
</config> -->
            <SetupGroupLink SetupGroupID="TrackChanges"></SetupGroupLink>
            <Name QualifierID="Qualifier root">Update ChangePackage</Name>
            <OnApprove ApproveSetup="Never"></OnApprove>
            <Configuration>H4sIAAAAAAAAALVVXU/bMBR9bn6FyQNKipZsb5P6AbQwjQlGRcv2iNzkNpg5tnEcBEP977uO3Y+MIdjXQyX73Otz7j3XqRWvCyauqFKcQXXFFleZFAtWDPr79yUnd6ArJsUgfJe8DQmITOZMFIPwcvbhzftwfxj0R3XFBFTVRc0hxX2FRGaoHO1fcA0DQtbApKEj23EHnRwNwk/0jk4zzZRZxQ8zg0JfmbkeMZFXoeVCtgnVtASDZThgGyKWyWWT2YOCQXiDtAmnokimRmOh4XCXm16rk93bWpoetuMWm57cvmnMLfd3C9MLLIHVOKOq2ROyQgg6ZTTNDJbhToxrrUGY8/kNZMamjH2G1zrkjFY+V8gcPLxuaMxptY7XnLtV+qLuqSwK0C8I8ibpX0meUUFf1ixd1u+IWsl02/B+uj73zBU41lrqM7xDqPW/r8KpzChn3+mcg1ecQak4NTCqRY6f0ytr3nwAzxfsJpYwsZCRq+OwNvJS5ah2PCG+6j1ir1IcBGxBIrskOwNiXY3JY9BJu11yYFDgcXyN3DCh2Tcs+qMsYUm6adC5o5pkyu7JgPh5JQUYi0SZLJPKsLlMMqkhyWVJmUiyhkk5puQJb7wiRULHbPlaaaOHkyPfksPzEwNl5RBspWN72WHVuQIRZSpuWumgHy0z8nwmW7TkAiSeWNF0OplKNDQkuFsi7y8sfcriAnvWy6Zye1uj2C4/4wSjGLmQmOZN0ZFzH8nR6oB0if0dKDts0vZ8SdR44sIaTK1FRR7nUnKgYhnYWSxq0fwJEt84pjeNWzcrg0NHQxGzhXyhvIaWg15kavO8ATZxyvB2gkuPX9n/Smt9wRogdlPZ1iSrE9EUKIc8dsEEbmvKq8gdW8/uJ2Hf5FrEd+Ysxr0PLJAJNhN1zjnUjvTPiY2uN7ye1mI9O8snH/AW0LxE/bT9zuFLmLafQv+q/gBmuvBNrQcAAA==</Configuration>
            <ValidObjectTypes AllObjectTypesValid="true"></ValidObjectTypes>
        </BusinessRule>
    </BusinessRules>
</STEP-ProductInformation>