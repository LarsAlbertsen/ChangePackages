<?xml version="1.0" encoding="UTF-8"?>
<STEP-ProductInformation ContextID="Context1" WorkspaceID="Main" UseContextLocale="false">
    <BusinessRules>
        <BusinessRule ID="NodeHandler" Scope="Global" Type="Action" RunPrivileged="false"><!-- Definition:
Action #1 (JavaScriptBusinessActionWithBinds):
<config>
  <bindings>
    <binding alias="nodeHandlerSource" type="OutboundBusinessProcessorNodeHandlerSource" contract="OutboundBusinessProcessorNodeHandlerSourceBindContract"/>
    <binding alias="nodeHandlerResult" type="OutboundBusinessProcessorNodeHandlerResult" contract="OutboundBusinessProcessorNodeHandlerResultBindContract"/>
    <binding alias="executionReportLogger" type="OutboundBusinessProcessorExecutionReportLogger" contract="OutboundBusinessProcessorExecutionReportLoggerBindContract"/>
  </bindings>
  <messages/>
  <javaScript>
// Node Handler Source bound to nodeHandlerSource
// Node Handler Result bound to nodeHandlerResult
// ExecutionReportLogger bound to executionReportLogger

var simpleEventType = nodeHandlerSource.getSimpleEventType();
if (simpleEventType == null) {
  executionReportLogger.logInfo("No event information available in node handler");
} else {
  executionReportLogger.logInfo("Event with ID '" + simpleEventType.getID()+ "' passed to node handler");
}
var node = nodeHandlerSource.getNode();
if (node != null && node instanceof com.stibo.core.domain.Product) {
  executionReportLogger.logInfo("Node handler handling product with URL: " + node.getURL());
  var mesg = {};
  mesg.stepid = node.getID() + "";
  mesg.name = node.getValue("UPC").getSimpleValue() + "";   // UPC
  if (nodeHandlerSource.isDeleted()) {
    nodeHandlerResult.addMessage("delete", JSON.stringify(mesg));	
  } else {
    mesg.category = node.getParent() == null ? null : node.getParent().getTitle() + "";
    mesg.productName = node.getValue("ProductName").getSimpleValue() + "";  // Product Name
    //mesg.manufacturerName = node.getValue("MFGName").getSimpleValue()+ ""; // MFG Name Name
    nodeHandlerResult.addMessage("upsert", JSON.stringify(mesg));	
  }
}
  </javaScript>
</config> -->
            <SetupGroupLink SetupGroupID="Actions"></SetupGroupLink>
            <Name QualifierID="Qualifier root">NodeHandler</Name>
            <OnApprove ApproveSetup="Never"></OnApprove>
            <Configuration>H4sIAAAAAAAAALVWTVPbMBA9N79imwMkQ2u3tw5JyPDZwkDIJNAeGWFvjDqy5EpyCmX4711ZyhdJaJgpl9he7dt9+3alqBBlxuUNKwrB0dzw0U2i5IhnbUMGu1f4ZW/rtLv3uYAxasOV7NQ/R5/qgDJRKZdZp359dfLxS727V2sflIZLNGZQCtyrAUwN/SoczK970+lRp37GxmyYaF7Yyfp+YinRD27vDrhMTd3Fomh9plmOlmh4w7wJXCTvDVcPBXbqPylsJJjMoqHVRLS+tyVsa6GSrV+lsi0qx7/MavLfVWH+tbuV2VbNBXA5LlhRfQNMLEBKWc0SSzQ84rK0t6qU6VQCrRJ6KN1TKX5jMhWoh6rUCTr8YYAHIvuCMxMCyef+wWda+qFgZupcCuHf4v/CcICmFHZzht7/zRke32NSuhkZYKG0PVdZhvofLHEV5jVMHc94vv3teIpbM5DHWit9QZRZhm89mOcqYYL/YbcCQ8YrzAvBLB6Urjfxhpxn23E94TgGNyQQug5+MKFqFlgFSzNbe47wg7IS4ZccYmWbZ5iVHa3VxkyD4VQ6Ho9RWlcDdJYpRRna4aJbo9mq8RE0ltAEp2FowiNJtjJrJFR2Kkeq4bvSI3IODZxsOmfOHUhFLlx7yFrRgTvPx2Mo9xOgMLhxloog/KZjkhoH22FWdp4X7wo9PWo0d8B7bENBQ45T2ZdpVBJWS2t0c62ciFX5vfcKwRbLi1b14/FcGstkgmpEuzuPjOW3KkqUxihVOeMyoi2dlol9jbQzxv5JEwmFD+PFuB6c78JUDcfDcSZro9l0B46rLkeTUXWPT87gPogbFjwNFU80g4lo/nfqLGnDzLl+Z6LEQPC6fxiUnE2YX1+KRpuPppwAFHYi5aLW3ByhoK2ZEvVKIljeKRFL07DjA4W0wvj3D3A2vOxRdW7n8tFDw/EnHd5RsLl5C3UldFxkSj/M1UanAw0SkQ+7ALr+sbvk4d6vuBUrKp1lCJ3qrRewP/PYXEjSMeDAAat8cVxlzJksR/SfUGrUL6S9OPn6UsrnGSkhIapks4wb9KYsDGq7QW9qT0tn9ZyhugK148ULFl3B4sU7WLjO/QXGCVKz7gkAAA==</Configuration>
            <ValidObjectTypes AllObjectTypesValid="true"></ValidObjectTypes>
        </BusinessRule>
    </BusinessRules>
</STEP-ProductInformation>